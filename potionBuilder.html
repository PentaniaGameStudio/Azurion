<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Potion Builder • JDR</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" type="image/x-icon" href="potionBuilder/assets/favicon.ico" />
  <link rel="stylesheet" href="/potionBuilder/assets/potion.css" />
</head>
<body>
  <header>
    <div>
      <h1>🧪 Potion Builder</h1>
      <small class="muted">Créateur • Recette — Calcul des difficultés & bonus de recette</small>
    </div>
    <div class="row">
      <button id="btnCreator" class="btn-tab on">🎛️ Créateur</button>
      <button id="btnRecipe" class="btn-tab">📖 Recette</button>
    </div>
  </header>

  <!-- PERSISTANT : Potion en cours -->
  <section class="active-bar" id="currentPotionBar">
    <div class="center-window">
      <div id="cpEmojis" class="emoji-bubble">(Aucun ingrédient sélectionné)</div>

      <div id="cpTotals" class="totals">
        <!-- exemples dynamiques :
        <span class="chip">💧 Liant: Eau pure</span>
        <span class="chip">⚗️ Catalyseur: Racine de Scorliose</span>
        <span class="chip">🧬 Réactifs: 2</span>
        <span class="chip">🧠 Difficulté: 7</span> -->
      </div>

      <div id="cpDetails" class="callout" style="display:none"></div>
      <div id="cpMath" class="tiny muted" style="display:none"></div>
          <button id="resetBtn" class="btn-danger">♻️ Reset</button>
    </div>
  </section>

  <!-- VUE : Créateur -->
  <section id="creatorView" class="views">
    <main class="wrap">
      <!-- Livres -->
      <section class="card" id="booksCard">
        <h2>📚 Livres</h2>
        <div class="content stack">
          <div class="row" id="booksTabs">
            <button class="catBtn on" data-tab="owned">Livres possédés</button>
            <button class="catBtn" data-tab="add">Ajouter un livre</button>
          </div>

          <div id="booksOwned" class="stack">
            <div class="tiny muted">Clique un livre pour le retirer.</div>
            <div id="booksList" class="row"></div>
          </div>

          <div id="booksAdd" class="stack hidden">
            <div class="row">
              <input id="bookInput" type="text" placeholder="Nom du livre…" />
              <button class="btn-accent" id="addBookBtn">+ Ajouter</button>
              <button class="btn-ghost" id="clearBooksBtn">Effacer tout</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Ingrédients -->
      <section class="card" id="ingredientsCard">
        <h2>🌿 Ingrédients disponibles</h2>
        <div class="content">
          <div class="row" style="justify-content:space-between; align-items:center">
            <div class="cats" id="ingCatTabs">
              <button class="catBtn on" data-cat="all">Tout</button>
              <button class="catBtn" data-cat="binder">💧 Liant</button>
              <button class="catBtn" data-cat="catalyst">⚗️ Catalyseur</button>
              <button class="catBtn" data-cat="reactant">🧬 Réactif</button>
            </div>

            <!-- Dropdown Origines -->
            <div style="position:relative">
              <button id="btnOriginDropdown" class="btn-ghost">🌍 Origines</button>
				
            </div>
          </div>

          <!-- Grille ingrédients -->
          <div id="ingredientsGrid" class="grid">
            <!-- Chaque carte suit ce markup :
            <article class="ing-card active|">
              <div class="ing-title">
                <span>Miel</span>
                <span class="badge liant">Liant</span>
              </div>
              <div class="ing-meta">
                <span class="badge">🧠 1</span>
                <span class="badge">🌏 Hearthlen</span>
              </div>
              <div class="ing-effect">Onguent visqueux (application longue)</div>
            </article>
            -->
          </div>
        </div>
      </section>
    </main>
  </section>
  
	<div id="originDropdown" class="card">
	  <div class="content row" style="justify-content:space-between; align-items:center">
		<h2 style="margin:0">🌍 Filtrer par origine</h2>
		<button class="btn-ghost tiny" id="btnClearOrigins">Effacer</button>
	  </div>
	  <div class="content" id="originTree"></div>
	</div>
				
	<!-- VUE : Recette -->
	<section id="recipeView" class="views hidden">
  <main class="wrap" style="grid-template-columns:1fr">
    <section class="card">
      <h2>📖 Recettes</h2>
      <div class="content">
        <div id="recipesList" class="recipe-list"></div>

      </div>
    </section>
  </main>
</section>



  <!-- Données (tes fichiers) -->
  <script type="module">
    import "/potionBuilder/js/shared/data.js"; /* expose ORIGIN_TREE, BOOKS, INGREDIENTS, RECIPES si tu y centralises */
  </script>

  <!-- Core -->
  <script type="module" src="/potionBuilder/js/core/dom.js"></script>
  <script type="module" src="/potionBuilder/js/core/events.js"></script>
  <script type="module" src="/potionBuilder/js/core/store.js"></script>
  <script type="module" src="/potionBuilder/js/core/router.js"></script>

  <!-- Shared -->
  <script type="module" src="/potionBuilder/js/shared/ui-kit.js"></script>
  <script type="module" src="/potionBuilder/js/shared/current-potion.js"></script>

  <!-- Créateur -->
  <script type="module" src="/potionBuilder/js/creator/compute.js"></script>
  <script type="module" src="/potionBuilder/js/creator/books-panel.js"></script>
  <script type="module" src="/potionBuilder/js/creator/ingredients-panel.js"></script>
  <script type="module" src="/potionBuilder/js/creator/view.js"></script>

  <!-- Recettes (plus tard) -->
  <script type="module" src="/potionBuilder/js/recipes/view.js"></script>

</body>
</html>
